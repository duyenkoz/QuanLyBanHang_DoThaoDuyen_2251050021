<title>Sản phẩm</title>
<link rel="stylesheet" href="../static/css/prod_by_cateid.css">
{% extends 'layout/base.html' %}
{% block content %}

{% if products|length > 0 %}
{% set current_cate = category_info %}
{% if current_cate is not none %}
  {% set parent_cate = current_cate.parent %}
{% else %}
  {% set parent_cate = None %}
{% endif %}

<!-- Đường dẫn định vị (breadcrumb) -->
<div class="mb-3">
    <p class="text-muted" style="font-size: 0.9rem;">
        <a class ="bread-crumb-home" href="/">Trang chủ</a>/
        {% if parent_cate is not none %}
          {% if parent_cate.Type == 1 %}
          Menu / {{ parent_cate.Title }}
          {% elif parent_cate.Type == 2 %}
          Sản phẩm đóng gói / {{ parent_cate.Title }}
          {% else %}
          {{ current_cate.Title }}
          {% endif %}
        {% else %}
          Sản phẩm
        {% endif %}
    </p>
</div>

<!-- Tiêu đề danh mục -->
<h5 class="fw-bold text-success mb-4" style="font-size: 1.2rem;">
    {{ current_cate.Title }}
</h5>

<div class="product-container">
    {% for product in products %}
    {% include 'components/product_card.html' %}
    {% endfor %}
</div>
{% if has_load_more %}
  <button id="btn-loadmore" type="button" class="btn bold">Xem thêm sản phẩm</button>
{% endif %}

<!-- Hidden fields -->
<input type="hidden" id="product-cursor" value="{{ cursor }}">
<input type="hidden" id="product-cateid" value="{{ current_cate.ID }}">
<input type="hidden" id="has_load_more" value="{{ has_load_more }}">

<!-- Modal -->
<div class="modal fade" id="modal-product-detail" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <h1 class="modal-title fs-5" id="staticBackdropLabel">Modal title</h1> -->
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="modal-product-detail-body">
        ...
      </div>
      <!-- <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>

{% else %}
<div class="no-item-container">
    <h4>Không tìm thấy sản phẩm nào</h4>
    <p>Xin lỗi, thông tin bạn tìm kiếm không có trong hệ thống. Vui lòng thử lại hoặc quay về trang chủ.</p>
    <a href="/" class="btn btn-success">Trang chủ</a>
</div>
{% endif %}
<script src="/static/js/products/product.js"></script>
{% endblock %}