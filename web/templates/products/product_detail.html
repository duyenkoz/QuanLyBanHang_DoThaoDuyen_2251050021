{% extends 'layout/base.html' %}
{% block content %}
<div class="container py-4">
  <div class="row g-4 justify-content-center">

    <!-- ·∫¢nh s·∫£n ph·∫©m -->
    <div class="col-md-5">
      <div class="bg-light p-4 text-center rounded">
        <img src="{{ url_for('static', filename='images/' + product.Img) }}" alt="{{ product.Title }}"
          class="img-fluid">
      </div>
    </div>

    <!-- Th√¥ng tin s·∫£n ph·∫©m -->
    <div class="col-md-6">
      <h3 class="text-success fw-bold">{{ product.Title }}</h3>
      <p class="text-muted" style="font-size: 0.9rem;"> {{ product.Description }} </p>
      <h5 class="text-success fw-semibold product-price" style="font-size: 1.2rem;">
        {{ "{:,.0f}".format(product.Price) }} ‚Ç´
      </h5>

      <form id="form-detail">
        {% set type_code = product.category.TypeCode %}

        {% if type_code in ['DRINK_FULL', 'DRINK_SIZE_ONLY'] %}
        <!-- K√≠ch c·ª° -->
        <div class="my-3">
          <label class="fw-semibold">Ch·ªçn k√≠ch c·ª°:</label>
          <div class="btn-group" role="group">
            <input type="radio" class="btn-check" name="size" id="size-m" value="M" checked>
            <label class="btn btn-outline-secondary btn-sm" for="size-m">M</label>

            <input type="radio" class="btn-check" name="size" id="size-l" value="L">
            <label class="btn btn-outline-secondary btn-sm" for="size-l">L</label>
          </div>
        </div>
        {% endif %}

        {% if type_code == 'DRINK_FULL' %}
        <!-- ƒê∆∞·ªùng -->
        <div class="my-3">
          <label class="fw-semibold">Ch·ªçn m·ª©c ƒë∆∞·ªùng:</label>
          <select class="form-select form-select-sm" name="sugar">
            <option value="100%">100%</option>
            <option value="70%">70%</option>
            <option value="50%">50%</option>
            <option value="30%">30%</option>
            <option value="0%">Kh√¥ng ƒë∆∞·ªùng</option>
          </select>
        </div>

        <!-- ƒê√° -->
        <div class="my-3">
          <label class="fw-semibold">Ch·ªçn m·ª©c ƒë√°:</label>
          <select class="form-select form-select-sm" name="ice">
            <option value="100%">100%</option>
            <option value="70%">70%</option>
            <option value="50%">50%</option>
            <option value="30%">30%</option>
            <option value="0%">Kh√¥ng ƒë√°</option>
          </select>
        </div>

        <!-- Topping -->
        <div class="my-3">
          <label class="fw-semibold">Ch·ªçn topping:</label>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="topping" value="Tr√¢n ch√¢u" id="tc">
            <label class="form-check-label" for="tc">Tr√¢n ch√¢u</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="topping" value="Th·∫°ch d·ª´a" id="td">
            <label class="form-check-label" for="td">Th·∫°ch d·ª´a</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="topping" value="Pudding" id="pd">
            <label class="form-check-label" for="pd">Pudding</label>
          </div>
        </div>
        {% endif %}

        <!-- S·ªë l∆∞·ª£ng -->
        <div class="my-4 d-flex align-items-center">
          <label class="me-3 fw-semibold">S·ªë l∆∞·ª£ng:</label>
          <button type="button" class="btn btn-outline-success btn-sm me-2" onclick="changeQuantity(-1)">‚àí</button>
          <input type="number" name="quantity" id="quantity" value="1" min="1"
            class="form-control form-control-sm w-auto text-center" style="width: 60px;">
          <button type="button" class="btn btn-outline-success btn-sm ms-2" onclick="changeQuantity(1)">+</button>
        </div>

        <!-- N√∫t th√™m gi·ªè h√†ng -->
        <button type="submit" class="btn btn-success btn-sm w-100" style="font-size: 0.9rem;">
          üõí Th√™m v√†o gi·ªè h√†ng : {{ "{:,.0f}".format(product.Price) }} ‚Ç´
        </button>
      </form>
    </div>
  </div>
</div>

<script>
  $(document).ready(function() {
    $('#form-detail').on('submit', function(e) {
      e.preventDefault();
    });
  });
  function changeQuantity(delta) {
    const qty = document.getElementById('quantity');
    let value = parseInt(qty.value);
    value = isNaN(value) ? 1 : value + delta;
    qty.value = value < 1 ? 1 : value;
  }
</script>
{% endblock %}